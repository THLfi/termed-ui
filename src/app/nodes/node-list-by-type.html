<ol class="breadcrumb">
  <li><a ng-href="#/">{{'termed' | translate}}</a></li>
  <li class="active">
    {{graph.properties.prefLabel | localizeValue}}
  </li>
</ol>

<div class="pull-right">
  <a class="btn btn-link btn-xs btn-default" ng-href="#/graphs/{{graph.id}}/nodes-all">
    <span class="glyphicon glyphicon-list"></span>
    {{'allNodes' | translate | capitalize}}
  </a>

  <div class="btn-group">
    <button class="btn btn-link btn-xs btn-default dropdown-toggle" type="button" id="export-menu"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <span class="glyphicon glyphicon-download-alt"></span>
      {{'download' | translate | capitalize}}
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="export-menu">
      <li><a ng-href="api/graphs/{{graph.id}}/types/{{type.id}}/nodes?max=-1" type="application/json">JSON</a></li>
      <li><a ng-href="api/graphs/{{graph.id}}/types/{{type.id}}/nodes.csv" type="text/csv">CSV</a></li>
    </ul>
  </div>
</div>

<h1 class="page-header">
  {{graph.properties.prefLabel | localizeValue}}
</h1>
<div class="page-header-info">
  <small class="text-muted">{{graph.uri || '-'}}</small>
</div>

<ul class="nav nav-tabs types">
  <li role="presentation" data-toggle="tooltip" data-placement="top"
      title="{{'all' | translate | capitalize}}" thl-tooltip>
    <a ng-href="#/graphs/{{graph.id}}/nodes">
      <span class="glyphicon glyphicon-home"></span>
    </a>
  </li>
  <li role="presentation" class="{{t.id == type.id && 'active'}}" ng-repeat="t in types"
      data-toggle="tooltip" data-placement="top" title="{{t.properties.prefLabel | localizeValue:t.id}}"
      thl-tooltip>
    <a ng-href="#/graphs/{{t.graph.id}}/types/{{t.id}}/nodes/">
      <span ng-if="$index < 3">
        {{t.properties.prefLabel | localizeValue:t.id | limit:12}}
      </span>
      <span ng-if="$index >= 3">
        {{t.id == type.id ? (t.properties.prefLabel | localizeValue:t.id) : '&bull;' | limit:12}}
      </span>
    </a>
  </li>
</ul>

<br>

<div class="row">
  <div class="col-md-10 col-sm-8">
    <div class="input-group">
      <div class="input-group-addon">
        <span class="glyphicon glyphicon-search"></span>
      </div>
      <input class="form-control" ng-model="query"
             ng-change="searchNodes(query)" ng-model-options="{debounce: 250}"
             placeholder="{{'search' | translate | capitalize}} {{type.properties.prefLabel | localizeValue | lowercase}}"
             type="text">
    </div>
  </div>
  <div class="col-md-2 col-sm-4">
    <button type="submit" class="btn btn-primary btn-block" ng-click="newNode()">
      <span class="glyphicon glyphicon-plus"></span>
      {{'new_' | translate | capitalize}}
      {{type.properties.prefLabel | localizeValue:type.id | lowercase | limit:12}}
    </button>
  </div>
</div>

<br>

<table class="table">
  <thead>
  <tr>
    <th>{{'label' | translate | capitalize}}</th>
    <th width="20%">{{'code' | translate | capitalize}}</th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="node in nodes">
    <td>
      <a ng-href="#/graphs/{{node.type.graph.id}}/types/{{node.type.id}}/nodes/{{node.id}}"
         title="{{node.uri}}">
        {{node.properties | localizeAnyValue:'prefLabel'}}
      </a>
    </td>
    <td>
      <small>
        <a ng-href="#/graphs/{{node.type.graph.id}}/types/{{node.type.id}}/nodes/{{node.id}}"
           class="text-muted"
           title="{{node.uri}}">
          {{node.code}}
        </a>
      </small>
    </td>
  </tr>
  </tbody>
</table>

<button class="btn btn-default btn-sm {{nodes.length == max || 'disabled'}}"
        ng-click="loadMoreResults()">
  {{'showMoreResults' | translate | capitalize}}
</button>

<hr>

<span class="label label-default" ng-click="showJson = !showJson">json</span>

<div ng-show="showJson">
  <pre>{{nodes | json}}</pre>
</div>
